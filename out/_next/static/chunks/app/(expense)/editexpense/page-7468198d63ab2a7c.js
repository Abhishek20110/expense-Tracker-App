(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{33384:(e,t,a)=>{Promise.resolve().then(a.bind(a,1798))},1798:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var l=a(95155),r=a(12115),s=a(82651),n=a(76046),o=a(40842),i=a.n(o);a(35279);let d=()=>{let[e,t]=(0,r.useState)(null),[a,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),u=(0,n.useRouter)(),g=(0,n.useSearchParams)().get("id"),x="https://expense-tracker-backend-five-zeta.vercel.app",m=localStorage.getItem("token"),[h,b]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(""),[S,A]=(0,r.useState)(null),[E,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{if(!m){o("Authorization token is missing"),u.push("/login");return}if(!g){u.push("/listexpense");return}let e=await s.A.get("".concat(x,"/api/expenses/").concat(g),{headers:{Authorization:"Bearer ".concat(m)}});t(e.data),f(e.data.title),y(e.data.amount),N(e.data.category),k(e.data.note),A(new Date(e.data.date)),o(null)}catch(e){console.error(e),o("Failed to fetch expense")}})()},[x,u,m,g]),(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){o("Authorization token is missing"),u.push("/login");return}b(!0);let t=await s.A.get("".concat(x,"/api/categories/my_categories"),{headers:{Authorization:"Bearer ".concat(e)}});200===t.status?_(t.data.data.categories||[]):o("Failed to fetch categories")}catch(e){o("An error occurred while fetching categories")}finally{b(!1)}})()},[x,u]);let C=async e=>{e.preventDefault(),o(null),c(null);try{let e=localStorage.getItem("token");if(!e){o("Authorization token is missing"),u.push("/login");return}let t=await s.A.put("".concat(x,"/api/expenses/update/").concat(g),{title:p,amount:v,category:j,note:w,date:S?S.toISOString().split("T")[0]:""},{headers:{Authorization:"Bearer ".concat(e)}});200===t.status?(c("Expense added successfully!"),u.back()):o("Failed to add expense")}catch(e){o("An error occurred while adding the expense")}};return h?(0,l.jsx)("div",{children:"Loading..."}):a?(0,l.jsx)("div",{className:"text-red-500 text-center",children:a}):(0,l.jsx)("div",{className:"flex justify-center items-center min-h-screen w-full bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100",children:(0,l.jsxs)("div",{className:"w-full p-8 bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100 rounded-xl overflow-y-auto my-10",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-center mb-8 text-purple-900",children:"Add Expense"}),d&&(0,l.jsx)("div",{className:"text-green-600 text-center mb-4",children:d}),a&&(0,l.jsx)("div",{className:"text-red-600 text-center mb-4",children:a}),(0,l.jsxs)("form",{onSubmit:C,children:[(0,l.jsxs)("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Name"}),(0,l.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Amount"}),(0,l.jsx)("input",{type:"number",value:v,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Category"}),(0,l.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),E.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Note"}),(0,l.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",rows:5,placeholder:"Enter a note for this expense..."})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-lg font-semibold text-indigo-800 mb-2",children:"Date"}),(0,l.jsx)(i(),{selected:S,onChange:e=>A(e),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500",required:!0,dateFormat:"yyyy-MM-dd",placeholderText:"Select a date"})]}),(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("button",{type:"submit",className:"px-6 py-3 text-white bg-gradient-to-r from-green-400 to-blue-500 rounded-full ".concat(h?"opacity-50 cursor-not-allowed":"hover:from-green-500 hover:to-blue-600 transition duration-300"),disabled:h,children:h?"Submitting...":"Add Expense"})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,915,651,621,441,517,358],()=>t(33384)),_N_E=e.O()}]);