(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{65378:(e,t,r)=>{Promise.resolve().then(r.bind(r,53086))},76046:(e,t,r)=>{"use strict";var a=r(66658);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},53086:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var a=r(95155),s=r(12115),l=r(82651),n=r(76046),o=r(27917),i=r(21096);let c=()=>{let[e,t]=(0,s.useState)([]),[r,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(null),[m,h]=(0,s.useState)(null),[x,g]=(0,s.useState)(""),[p,b]=(0,s.useState)("name"),[y,f]=(0,s.useState)("asc"),[w,j]=(0,s.useState)(!1),[v,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[C,A]=(0,s.useState)(""),L=(0,n.useRouter)(),_="https://expense-tracker-backend-five-zeta.vercel.app";(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){u("Authorization token is missing"),L.push("/login");return}j(!0);let r=await l.A.get("".concat(_,"/api/categories/my_categories"),{headers:{Authorization:"Bearer ".concat(e)}});200===r.status?t(r.data.data.categories||[]):u("Failed to fetch categories")}catch(e){u("An error occurred while fetching categories")}finally{j(!1)}})()},[_,L]),(0,s.useEffect)(()=>{(()=>{let t=e.filter(e=>e.name.toLowerCase().includes(x.toLowerCase()));t.sort((e,t)=>{let r=e[p],a=t[p];return r<a?"asc"===y?-1:1:r>a?"asc"===y?1:-1:0}),c(t)})()},[x,p,y,e]);let E=async r=>{if(window.confirm("Are you sure you want to delete this category?"))try{let a=localStorage.getItem("token");if(!a){u("Authorization token is missing"),L.push("/login");return}await l.A.delete("".concat(_,"/api/categories/delete/").concat(r),{headers:{Authorization:"Bearer ".concat(a)}}),t(e.filter(e=>e._id!==r)),h("Category deleted successfully!")}catch(e){console.error(e),u("Failed to delete category")}},z=(e,t)=>{S(e),A(t),N(!0)},R=async()=>{if(C)try{let r=localStorage.getItem("token");if(!r){u("Authorization token is missing"),L.push("/login");return}let a=await l.A.put("".concat(_,"/api/categories/update/").concat(k),{name:C},{headers:{Authorization:"Bearer ".concat(r)}});200===a.status&&(t(e.map(e=>e._id===k?{...e,name:C}:e)),h("Category renamed successfully!"),N(!1))}catch(e){u("Failed to rename category")}};return(0,a.jsxs)("div",{className:"relative w-full px-4 sm:px-6 lg:px-8 py-6 md:py-10 bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100 rounded-xl mx-auto",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 mt-4 mr-4",children:(0,a.jsx)("button",{onClick:()=>{L.push("/addcategory")},className:"px-2 py-1 sm:px-3 sm:py-2 text-sm text-white bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full hover:from-yellow-500 hover:to-orange-600 transition-transform transform hover:scale-105 duration-300 shadow-md",children:"Add New"})}),(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-center mb-6 md:mb-8 text-purple-900",children:"My Categories"}),m&&(0,a.jsx)("div",{className:"text-green-600 text-center mb-4",children:m}),d&&(0,a.jsx)("div",{className:"text-red-600 text-center mb-4",children:d}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("input",{type:"text",placeholder:"Search Category...",value:x,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded"})}),(0,a.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mr-2",children:"Sort By:"}),(0,a.jsx)("select",{value:p,onChange:e=>{b(e.target.value)},className:"px-4 py-2 border border-gray-300 rounded",children:(0,a.jsx)("option",{value:"name",children:"Name"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mr-2",children:"Order:"}),(0,a.jsxs)("select",{value:y,onChange:e=>{f(e.target.value)},className:"px-4 py-2 border border-gray-300 rounded",children:[(0,a.jsx)("option",{value:"asc",children:"Ascending"}),(0,a.jsx)("option",{value:"desc",children:"Descending"})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-md",children:[(0,a.jsx)("thead",{className:"bg-purple-800 text-white",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-3 border border-gray-200 text-center w-1/12",children:"Sl"}),(0,a.jsx)("th",{className:"py-2 px-3 border border-gray-200 text-center w-1/2",children:"Title"}),(0,a.jsx)("th",{className:"py-2 px-3 border border-gray-200 text-center w-1/3",children:"Action"})]})}),(0,a.jsx)("tbody",{children:w?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"py-4 text-center",children:"Loading..."})}):r.length>0?r.map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-100 transition-all duration-300 ease-in-out",children:[(0,a.jsx)("td",{className:"py-2 px-3 border border-gray-200 text-center",children:t+1}),(0,a.jsx)("td",{className:"py-2 px-3 border border-gray-200 text-center",children:e.name}),(0,a.jsxs)("td",{className:"py-2 px-3 border border-gray-200 text-center flex flex-row gap-2 justify-center",children:[(0,a.jsx)("button",{onClick:()=>z(e._id,e.name),className:"p-2 w-auto max-w-fit text-white bg-blue-500 rounded hover:bg-blue-600 transition-colors duration-200","aria-label":"Rename",children:(0,a.jsx)(o.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>E(e._id),className:"p-2 w-auto max-w-fit text-white bg-red-500 rounded hover:bg-red-600 transition-colors duration-200","aria-label":"Delete",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})})]})]},e._id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"py-2 px-3 text-center text-gray-600",children:"No categories available"})})})]})}),v&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Rename Category"}),(0,a.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded mb-4"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Cancel"}),(0,a.jsx)("button",{onClick:R,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]})})]})}},27917:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(12115);let s=a.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})},21096:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(12115);let s=a.forwardRef(function(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(65378)),_N_E=e.O()}]);