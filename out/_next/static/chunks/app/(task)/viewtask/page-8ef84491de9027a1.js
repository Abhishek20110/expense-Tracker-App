(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{59085:(e,t,r)=>{Promise.resolve().then(r.bind(r,56035))},76046:(e,t,r)=>{"use strict";var s=r(66658);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},56035:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(95155),a=r(12115),l=r(82651),o=r(76046);let d={Pending:"bg-yellow-500","In Progress":"bg-blue-500",Completed:"bg-green-500"},n=()=>{let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[c,i]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(""),[m,b]=(0,a.useState)("title"),[g,y]=(0,a.useState)("asc"),f=(0,o.useRouter)(),j="https://expense-tracker-backend-five-zeta.vercel.app";(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token");if(!e){i("Authorization token is missing"),f.push("/login");return}let r=(await l.A.get("".concat(j,"/api/tasks/mytasks"),{headers:{Authorization:"Bearer ".concat(e)}})).data.data;t(r),n(r)}catch(e){console.error(e),i("Failed to fetch tasks")}})()},[j,f]),(0,a.useEffect)(()=>{(()=>{let t=e.filter(e=>e.title.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()));t.sort((e,t)=>{let r=e[m],s=t[m];return r<s?"asc"===g?-1:1:r>s?"asc"===g?1:-1:0}),n(t)})()},[h,m,g,e]);let N=e=>{f.push("/taskdetails?id=".concat(e))},v=async r=>{try{let s=localStorage.getItem("token");if(!s){i("Authorization token is missing"),f.push("/login");return}await l.A.delete("".concat(j,"/api/tasks/task/").concat(r),{headers:{Authorization:"Bearer ".concat(s)}}),t(e.filter(e=>e._id!==r)),x("Task deleted successfully!")}catch(e){console.error(e),i("Failed to delete task")}},k=async(r,s)=>{try{let a=localStorage.getItem("token");if(!a){i("Authorization token is missing"),f.push("/login");return}await l.A.patch("".concat(j,"/api/tasks/task/status/").concat(r),{status:s},{headers:{Authorization:"Bearer ".concat(a)}}),t(e.map(e=>e._id===r?{...e,status:s}:e)),x("Task status updated successfully!")}catch(e){console.error(e),i("Failed to update task status")}};return(0,s.jsxs)("div",{className:"relative w-full px-4 sm:px-6 lg:px-8 py-6 md:py-10 bg-gradient-to-r from-pink-100 via-purple-100 to-indigo-100 rounded-xl  mx-auto",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 mt-4 mr-4",children:(0,s.jsx)("button",{onClick:()=>{f.push("/addtask")},className:"px-4 py-2 sm:px-6 sm:py-3 text-white bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full hover:from-yellow-500 hover:to-orange-600 transition-transform transform hover:scale-105 duration-300 shadow-md",children:"Add Tasks"})}),(0,s.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-center mb-6 md:mb-8 text-purple-900",children:"My Tasks"}),u&&(0,s.jsx)("div",{className:"text-green-600 text-center mb-4",children:u}),c&&(0,s.jsx)("div",{className:"text-red-600 text-center mb-4",children:c}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("input",{type:"text",placeholder:"Search tasks...",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded"})}),(0,s.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mr-2",children:"Sort By:"}),(0,s.jsxs)("select",{value:m,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"title",children:"Title"}),(0,s.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,s.jsx)("option",{value:"status",children:"Status"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mr-2",children:"Order:"}),(0,s.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-4 py-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"asc",children:"Ascending"}),(0,s.jsx)("option",{value:"desc",children:"Descending"})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg shadow-md",children:[(0,s.jsx)("thead",{className:"bg-purple-800 text-white",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Sl"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Title"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Description"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Due Date"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Status"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Comments"}),(0,s.jsx)("th",{className:"py-3 px-4 border-b border-gray-200 text-left",children:"Action"})]})}),(0,s.jsx)("tbody",{children:r.length>0?r.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:t+1}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:e.title}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:e.description}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:new Date(e.dueDate).toLocaleDateString()}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-white ".concat(d[e.status]),children:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4 border-b border-gray-200 text-left",children:(0,s.jsx)("p",{className:"text-gray-700",children:e.comments||"No comments"})}),(0,s.jsxs)("td",{className:"py-3 px-4 border-b border-gray-200 text-left flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("button",{onClick:()=>N(e._id),className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>v(e._id),className:"px-4 py-2 text-white bg-red-500 rounded hover:bg-red-600",children:"Delete"}),(0,s.jsxs)("select",{value:e.status,onChange:t=>k(e._id,t.target.value),className:"px-4 py-2 border border-gray-300 rounded",children:[(0,s.jsx)("option",{value:"Pending",children:"Pending"}),(0,s.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,s.jsx)("option",{value:"Completed",children:"Completed"})]})]})]},e._id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"py-3 px-4 text-center text-gray-600",children:"No tasks available"})})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(59085)),_N_E=e.O()}]);